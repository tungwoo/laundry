## 一、系统概述​
本系统为洗衣店提供全流程信息化管理，提供收衣、订单管理、会员管理、财务管理等核心业务，支持微信小程序​和Web管理后台​双端协同，旨在提升运营效率、优化客户体验、实现数据驱动的精细化运营。

## 二、系统功能
### 1、智能订单录入功能
- 智能录入模式：
  - 支持通过拍摄衣物照片，通过大模型识别出衣物的类型、品牌、颜色、标准价格等信息
  - 支持批量识别多件衣物
  - 识别结果可手动修正
  - 自动推荐清洗方案和价格
- 手工录入模式：
  - 支持手工录入衣物类型（外套/衬衫等）、品牌、颜色、材质、污渍标记
  - 支持特殊要求标记（如加急/防褪色/特殊处理）
  - 支持自定义备注信息
- 衣物信息记录：
  - 每件衣物支持上传衣物瑕疵照片，用于记录留档
  - 支持记录衣物品牌、购买价格等额外信息
  - 支持记录衣物特殊处理要求
- 订单管理：
  - 生成唯一订单编码，自动生成唯一订单编号
  - 关联顾客信息（会员/非会员）
  - 支持订单修改和取消
  - 支持订单备注和特殊要求
- 打印功能：
  - 打印订单信息（包含衣物清单、价格、取衣时间等）
  - 打印水洗标（包含衣物信息、清洗要求等）
  - 支持批量打印
  - 支持打印历史记录查询

### 2、订单状态管理
- 订单状态流转：
  - 待清洗：衣物收取未清洗
  - 清洗中：衣物正在清洗
  - 待上架：衣物清洗完成待上架
  - 已上架：衣物已上架，等待顾客取衣
  - 已自取：顾客已取走衣物
  - 已送上门：衣物已配送上门
  - 已取消：订单已取消
- 上架管理：
  - 衣物清洗完成后，将衣物上架
  - 记录衣物上架位置和上架号
  - 支持批量上架操作
  - 支持上架位置管理
- 取衣管理：
  - 支持顾客到店自取
  - 支持配送上门服务
  - 配送上门支持上传送达照片
  - 支持取衣码验证
- 异常处理：
  - 支持衣物损坏记录
  - 支持顾客投诉处理
  - 支持订单异常标记
  - 支持退款处理

### 3、会员管理
- 会员信息管理：
  - 会员信息录入与维护
  - 会员卡充值
  - 会员消费记录

### 4、财务管理
- 收银管理：
  - 支持选择支付方式（未支付、微信支付、支付宝、现金、会员卡），不需要真正打通这些平台的支付方式，只是信息记录
  - 支持订单退款
  - 支持会员退充值余额
- 财务报表：
  - 日营业额统计
  - 月度财务报表

## 三、典型用户场景
### 1、到店洗衣流程
1. 顾客将衣物送到门店，或者店员上门取回衣物
2. 店员使用系统录入衣物信息
   - 可选择智能识别或手动录入
   - 记录衣物特殊要求
   - 上传衣物照片
3. 系统生成订单
   - 打印订单小票给顾客
   - 打印水洗标签订到衣物上
4. 衣物清洗完成后
   - 店员将衣物上架
   - 系统更新订单状态
   - 通知顾客取衣
5. 顾客取衣
   - 验证取衣码
   - 确认衣物无误
   - 完成订单

### 2、会员服务流程
1. 会员录入
   - 填写基本信息
   - 选择会员模式
   - 获取会员权益
2. 会员充值
   - 享受会员价格
3. 会员服务
   - 接收活动通知
   - 参与会员活动
   - 使用积分兑换
   - 享受专属服务

### 3、配送服务流程
1. 预约衣物送回
   - 发送短信或微信消息给顾客
   - 顾客确认
2. 衣物送回
   - 清洗完成后配送
   - 上传送达照片
   - 确认签收
   - 完成订单

## 四、系统交互设计

### 1、系统架构交互图

```
+---------------------+        +---------------------+
|                     |        |                     |
|   微信小程序端       | <----> |   管理后台(Admin)    |
|   (店员移动端使用)   |        |   (店员PC端使用)     |
|                     |        |                     |
+---------------------+        +---------------------+
           ^                             ^
           |                             |
           v                             v
+-----------------------------------------------------+
|                                                     |
|               后端服务 (Spring Boot)                  |
|                                                     |
+-----------------------------------------------------+
                     ^
                     |
                     v
+-----------------------------------------------------+
|                                                     |
|                数据库 (MySQL)                        |
|                                                     |
+-----------------------------------------------------+
```

### 2、微信小程序端交互设计（店员使用）

#### 2.1 店员登录流程
- 店员通过微信授权登录小程序
- 后端服务验证店员身份权限
- 根据权限显示对应功能模块

#### 2.2 订单处理模块
- **订单录入**
  - 智能识别模式：拍摄衣物照片进行识别
  - 手工录入模式：手动填写衣物信息
  - 客户信息关联（搜索/新建客户）
  - 价格计算与调整
  - 订单预览与确认

- **订单列表**
  - 按状态分类显示订单（待处理/处理中/待取件/已完成/已取消）
  - 支持按客户名称、订单号、时间等搜索
  - 订单卡片显示关键信息：订单号、客户、衣物数量、状态、金额

- **订单详情**
  - 显示订单全部信息
  - 衣物清单管理
  - 状态变更操作
  - 上传衣物照片
  - 添加处理记录
  - 生成取衣码

- **订单状态管理**
  - 一键切换订单状态（清洗中/待上架/已上架等）
  - 批量操作功能
  - 异常订单标记
  - 上架位置记录

#### 2.3 会员管理模块
- **会员查询**
  - 按姓名/手机号快速搜索会员
  - 会员基本信息显示
  - 会员消费记录查询
  - 会员卡余额查询

- **会员操作**
  - 新增会员
  - 会员卡充值
  - 修改会员信息
  - 查看会员消费历史

- **会员卡交易**
  - 会员卡充值
  - 会员卡消费
  - 交易记录查询
  - 余额调整

#### 2.4 店铺运营
- **每日营收**
  - 当日订单统计
  - 当日收入统计
  - 支付方式分析
  - 业务量趋势图

- **工作台**
  - 待处理任务提醒
  - 异常订单提醒
  - 今日工作概览
  - 快捷功能入口

- **库存管理**
  - 上架位置管理
  - 衣物库存查询
  - 待取衣物提醒

#### 2.5 收银功能
- **订单收款**
  - 多种支付方式记录（现金/微信/支付宝/会员卡）
  - 找零计算
  - 收款确认
  - 打印小票（蓝牙打印机连接）

- **交易记录**
  - 当日交易流水
  - 交易记录查询
  - 退款处理

### 3、管理后台交互设计（PC端）

#### 3.1 订单管理模块
- **订单总览**
  - 订单数据看板
  - 订单状态分布
  - 处理效率分析
  - 异常订单监控

- **订单录入**
  - 高级智能识别模式：上传衣物照片进行批量识别
  - 详细手工录入模式：精确填写衣物信息及特殊要求
  - 客户信息智能匹配与推荐
  - 自定义价格策略设置
  - 多件衣物批量处理
  - 衣物标签自动生成与打印
  - 历史订单参考与复制功能

- **订单列表**
  - 高级筛选功能（多条件组合查询）
  - 批量处理功能
  - 导出订单数据（Excel/PDF格式）
  - 订单详情查看
  - 自定义列表视图设置

- **订单详情**
  - 详细订单信息
  - 操作历史记录
  - 衣物清单管理（增加、修改、删除衣物项）
  - 客户信息关联与修改
  - 状态变更控制与日志
  - 支付信息修改
  - 添加特殊处理指南
  - 订单备注与标记功能

- **订单状态管理**
  - 完整订单生命周期控制
  - 批量状态变更功能
  - 状态自动提醒设置
  - 异常订单处理流程
  - 状态变更原因记录

- **订单分析**
  - 订单来源分析
  - 订单类型分析
  - 处理时间分析
  - 异常订单分析
  - 季节性波动分析
  - 客户消费习惯分析

#### 3.2 会员管理模块
- **会员总览**
  - 会员数据看板
  - 会员增长趋势
  - 会员价值分析
  - 会员活跃度分析

- **会员列表**
  - 高级筛选功能
  - 会员标签管理
  - 会员等级管理
  - 导出会员数据

- **会员详情**
  - 会员完整信息
  - 消费历史记录
  - 充值记录查询
  - 会员价值分析
  - 交易明细查看

- **会员营销**
  - 会员分组管理
  - 优惠活动设置
  - 会员通知管理
  - 营销效果分析

#### 3.3 财务管理模块
- **财务总览**
  - 营收数据看板
  - 收入趋势图表
  - 支付方式分析（现金/微信/支付宝/会员卡）
  - 营收构成分析

- **交易记录**
  - 详细交易流水
  - 高级筛选功能
  - 交易类型分析
  - 导出财务数据

- **财务报表**
  - 日报表生成
  - 月度报表生成
  - 年度财务统计
  - 报表导出功能

- **资金管理**
  - 收支明细
  - 退款管理
  - 会员卡资金池
  - 财务对账

#### 3.4 系统管理模块
- **用户管理**
  - 员工账户管理
  - 权限角色设置
  - 操作日志查询
  - 登录记录查看

- **系统设置**
  - 业务参数配置
  - 价格策略管理
  - 打印模板设置
  - 基础数据维护

- **数据备份**
  - 系统数据备份
  - 备份历史查看
  - 数据恢复功能
  - 定时备份设置

### 4、数据交互流程

#### 4.1 订单处理流程
1. 店员可通过微信小程序或PC管理后台录入衣物信息创建订单
2. 后端服务处理订单数据并保存到数据库
3. 店员可通过小程序或PC管理后台查看订单详情
4. 店员可通过小程序或PC管理后台更新订单状态
5. 订单状态变更实时同步到所有终端
6. PC管理后台提供更丰富的订单管理与分析功能

#### 4.2 会员管理流程
1. 店员通过小程序或PC后台创建会员账户
2. 会员信息同步保存到数据库
3. 店员可通过小程序为会员办理充值
4. 会员消费时，店员通过小程序扣减会员卡余额
5. 会员余额和消费记录实时同步更新
6. PC管理后台可查看详细会员数据和消费行为分析

#### 4.3 收银结算流程
1. 店员通过小程序完成订单创建后进行收银
2. 记录支付方式（现金/微信/支付宝/会员卡）
3. 支付信息同步到后端服务
4. 生成收款凭证（可通过蓝牙打印机打印小票）
5. 交易记录实时同步到PC管理后台
6. PC管理后台汇总生成财务报表

### 5、接口数据交互规范

#### 5.1 接口通用规范
- 统一使用POST方法
- 请求参数采用JSON格式
- 响应数据采用JSON格式
- 统一响应格式: `{"code":1,"msg":"errorMsg","data":obj}`
- 成功状态: `code=1`，失败状态: `code=0`

#### 5.2 关键数据接口
- **员工登录接口**
  - 微信授权登录（小程序）
  - 账号密码登录（PC端）
  - 获取操作权限

- **订单相关接口**
  - 创建订单
  - 查询订单列表
  - 获取订单详情
  - 更新订单状态
  - 订单收款

- **会员相关接口**
  - 创建会员
  - 查询会员信息
  - 会员卡充值
  - 会员卡消费
  - 查询交易记录

- **收银相关接口**
  - 订单收款
  - 会员卡充值
  - 查询交易流水
  - 退款处理
  - 日结对账