{"ast":null,"code":"import { mapGetters } from 'vuex';\nimport Breadcrumb from '@/components/Breadcrumb';\nexport default {\n  name: 'BasicLayout',\n  components: {\n    Breadcrumb\n  },\n  data() {\n    return {\n      collapsed: false,\n      theme: 'dark',\n      openKeys: [],\n      selectedKeys: [],\n      preOpenKeys: []\n    };\n  },\n  computed: {\n    ...mapGetters(['userInfo']),\n    menus() {\n      return this.$router.options.routes.filter(item => !item.meta || !item.meta.hidden);\n    }\n  },\n  watch: {\n    $route: {\n      handler: function (route) {\n        this.updateMenu(route);\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    // 更新菜单状态\n    updateMenu(route) {\n      const {\n        meta,\n        path\n      } = route;\n      // 如果是隐藏的路由，不更新菜单\n      if (meta && meta.hidden) {\n        return;\n      }\n      const paths = path.split('/');\n      this.selectedKeys = [path];\n      if (paths.length >= 2) {\n        this.openKeys = ['/' + paths[1]];\n      }\n    },\n    // 处理子菜单展开/收起\n    onOpenChange(openKeys) {\n      // 手风琴模式，只展开一个一级菜单\n      const latestOpenKey = openKeys.find(key => this.openKeys.indexOf(key) === -1);\n      this.openKeys = latestOpenKey ? [latestOpenKey] : [];\n    },\n    // 退出登录\n    handleLogout() {\n      this.$confirm({\n        title: '提示',\n        content: '确定要退出登录吗？',\n        onOk: () => {\n          this.$store.dispatch('user/logout').then(() => {\n            this.$router.push('/login');\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","Breadcrumb","name","components","data","collapsed","theme","openKeys","selectedKeys","preOpenKeys","computed","menus","$router","options","routes","filter","item","meta","hidden","watch","$route","handler","route","updateMenu","immediate","methods","path","paths","split","length","onOpenChange","latestOpenKey","find","key","indexOf","handleLogout","$confirm","title","content","onOk","$store","dispatch","then","push"],"sources":["src/layouts/BasicLayout.vue"],"sourcesContent":["<template>\n  <a-layout id=\"basic-layout\" style=\"min-height: 100vh\">\n    <!-- 侧边栏 -->\n    <a-layout-sider\n      v-model=\"collapsed\"\n      :trigger=\"null\"\n      collapsible\n      :theme=\"theme\"\n      width=\"256\"\n    >\n      <div class=\"logo\">\n        <router-link to=\"/\">\n          <img src=\"@/assets/logo.png\" alt=\"logo\" />\n          <h1 v-if=\"!collapsed\">洗衣店管理系统</h1>\n        </router-link>\n      </div>\n      <a-menu\n        :theme=\"theme\"\n        mode=\"inline\"\n        :selectedKeys=\"selectedKeys\"\n        :openKeys=\"openKeys\"\n        @openChange=\"onOpenChange\"\n      >\n        <template v-for=\"item in menus\">\n          <!-- 无子菜单的情况 -->\n          <a-menu-item v-if=\"!item.children || item.children.length === 0 && !item.meta.hidden\" :key=\"item.path\">\n            <router-link :to=\"{ path: item.path }\">\n              <a-icon :type=\"item.meta.icon || 'appstore'\" />\n              <span>{{ item.meta.title }}</span>\n            </router-link>\n          </a-menu-item>\n          \n          <!-- 有子菜单的情况 -->\n          <a-sub-menu v-else-if=\"!item.meta.hidden\" :key=\"item.path\">\n            <span slot=\"title\">\n              <a-icon :type=\"item.meta.icon || 'appstore'\" />\n              <span>{{ item.meta.title }}</span>\n            </span>\n            <template v-for=\"child in item.children\">\n              <a-menu-item v-if=\"!child.meta || !child.meta.hidden\" :key=\"item.path + '/' + child.path\">\n                <router-link :to=\"{ path: item.path + '/' + child.path }\">\n                  <span>{{ child.meta.title }}</span>\n                </router-link>\n              </a-menu-item>\n            </template>\n          </a-sub-menu>\n        </template>\n      </a-menu>\n    </a-layout-sider>\n    \n    <!-- 主体内容 -->\n    <a-layout>\n      <!-- 顶部导航栏 -->\n      <a-layout-header style=\"background: #fff; padding: 0\">\n        <div class=\"header-container\">\n          <div class=\"header-left\">\n            <a-icon\n              class=\"trigger\"\n              :type=\"collapsed ? 'menu-unfold' : 'menu-fold'\"\n              @click=\"() => (collapsed = !collapsed)\"\n            />\n            <breadcrumb />\n          </div>\n          <div class=\"header-right\">\n            <a-dropdown>\n              <div class=\"user-dropdown\">\n                <a-avatar :src=\"userInfo.avatar || require('@/assets/avatar.png')\" />\n                <span class=\"username\">{{ userInfo.nickname || userInfo.username }}</span>\n              </div>\n              <a-menu slot=\"overlay\">\n                <a-menu-item key=\"0\">\n                  <router-link to=\"/profile/index\">\n                    <a-icon type=\"user\" />个人中心\n                  </router-link>\n                </a-menu-item>\n                <a-menu-item key=\"1\">\n                  <router-link to=\"/profile/password\">\n                    <a-icon type=\"lock\" />修改密码\n                  </router-link>\n                </a-menu-item>\n                <a-menu-divider />\n                <a-menu-item key=\"3\" @click=\"handleLogout\">\n                  <a-icon type=\"logout\" />退出登录\n                </a-menu-item>\n              </a-menu>\n            </a-dropdown>\n          </div>\n        </div>\n      </a-layout-header>\n      \n      <!-- 页面内容 -->\n      <a-layout-content style=\"margin: 16px\">\n        <div :style=\"{ padding: '24px', background: '#fff', minHeight: '360px' }\">\n          <router-view />\n        </div>\n      </a-layout-content>\n      \n      <!-- 页脚 -->\n      <a-layout-footer style=\"text-align: center\">\n        洗衣店管理系统 ©2023 Created by BigCat\n      </a-layout-footer>\n    </a-layout>\n  </a-layout>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport Breadcrumb from '@/components/Breadcrumb'\n\nexport default {\n  name: 'BasicLayout',\n  components: {\n    Breadcrumb\n  },\n  data() {\n    return {\n      collapsed: false,\n      theme: 'dark',\n      openKeys: [],\n      selectedKeys: [],\n      preOpenKeys: []\n    }\n  },\n  computed: {\n    ...mapGetters(['userInfo']),\n    menus() {\n      return this.$router.options.routes.filter(item => !item.meta || !item.meta.hidden)\n    }\n  },\n  watch: {\n    $route: {\n      handler: function(route) {\n        this.updateMenu(route)\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    // 更新菜单状态\n    updateMenu(route) {\n      const { meta, path } = route\n      // 如果是隐藏的路由，不更新菜单\n      if (meta && meta.hidden) {\n        return\n      }\n      \n      const paths = path.split('/')\n      this.selectedKeys = [path]\n      \n      if (paths.length >= 2) {\n        this.openKeys = ['/' + paths[1]]\n      }\n    },\n    // 处理子菜单展开/收起\n    onOpenChange(openKeys) {\n      // 手风琴模式，只展开一个一级菜单\n      const latestOpenKey = openKeys.find(key => this.openKeys.indexOf(key) === -1)\n      this.openKeys = latestOpenKey ? [latestOpenKey] : []\n    },\n    // 退出登录\n    handleLogout() {\n      this.$confirm({\n        title: '提示',\n        content: '确定要退出登录吗？',\n        onOk: () => {\n          this.$store.dispatch('user/logout').then(() => {\n            this.$router.push('/login')\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.logo {\n  height: 64px;\n  line-height: 64px;\n  padding-left: 24px;\n  overflow: hidden;\n  background: @layout-trigger-background;\n  \n  img {\n    width: 32px;\n    height: 32px;\n    display: inline-block;\n    vertical-align: middle;\n  }\n  \n  h1 {\n    display: inline-block;\n    margin: 0 0 0 12px;\n    color: #fff;\n    font-weight: 600;\n    font-size: 18px;\n    vertical-align: middle;\n  }\n  \n  a {\n    text-decoration: none;\n  }\n}\n\n.trigger {\n  font-size: 18px;\n  line-height: 64px;\n  padding: 0 24px;\n  cursor: pointer;\n  transition: color 0.3s;\n  \n  &:hover {\n    color: @primary-color;\n  }\n}\n\n.header-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 100%;\n  padding-right: 24px;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n}\n\n.user-dropdown {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 0 12px;\n  \n  &:hover {\n    background: rgba(0, 0, 0, 0.025);\n  }\n  \n  .username {\n    margin-left: 8px;\n  }\n}\n</style> "],"mappings":"AA0GA,SAAAA,UAAA;AACA,OAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EACAG,KAAA;IACA;MACAC,SAAA;MACAC,KAAA;MACAC,QAAA;MACAC,YAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAV,UAAA;IACAW,MAAA;MACA,YAAAC,OAAA,CAAAC,OAAA,CAAAC,MAAA,CAAAC,MAAA,CAAAC,IAAA,KAAAA,IAAA,CAAAC,IAAA,KAAAD,IAAA,CAAAC,IAAA,CAAAC,MAAA;IACA;EACA;EACAC,KAAA;IACAC,MAAA;MACAC,OAAA,WAAAA,CAAAC,KAAA;QACA,KAAAC,UAAA,CAAAD,KAAA;MACA;MACAE,SAAA;IACA;EACA;EACAC,OAAA;IACA;IACAF,WAAAD,KAAA;MACA;QAAAL,IAAA;QAAAS;MAAA,IAAAJ,KAAA;MACA;MACA,IAAAL,IAAA,IAAAA,IAAA,CAAAC,MAAA;QACA;MACA;MAEA,MAAAS,KAAA,GAAAD,IAAA,CAAAE,KAAA;MACA,KAAApB,YAAA,IAAAkB,IAAA;MAEA,IAAAC,KAAA,CAAAE,MAAA;QACA,KAAAtB,QAAA,UAAAoB,KAAA;MACA;IACA;IACA;IACAG,aAAAvB,QAAA;MACA;MACA,MAAAwB,aAAA,GAAAxB,QAAA,CAAAyB,IAAA,CAAAC,GAAA,SAAA1B,QAAA,CAAA2B,OAAA,CAAAD,GAAA;MACA,KAAA1B,QAAA,GAAAwB,aAAA,IAAAA,aAAA;IACA;IACA;IACAI,aAAA;MACA,KAAAC,QAAA;QACAC,KAAA;QACAC,OAAA;QACAC,IAAA,EAAAA,CAAA;UACA,KAAAC,MAAA,CAAAC,QAAA,gBAAAC,IAAA;YACA,KAAA9B,OAAA,CAAA+B,IAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}