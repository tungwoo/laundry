{"ast":null,"code":"import { mapActions } from 'vuex';\nimport JSCookie from 'js-cookie';\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loading: false,\n      loginError: '',\n      username: '',\n      password: '',\n      rememberMe: false\n    };\n  },\n  beforeCreate() {\n    this.form = this.$form.createForm(this);\n  },\n  created() {\n    // 检查是否有保存的用户名密码\n    this.username = JSCookie.get('username') || '';\n    this.password = JSCookie.get('password') || '';\n    this.rememberMe = this.username !== '' && this.password !== '';\n  },\n  methods: {\n    ...mapActions('user', ['login']),\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          this.loading = true;\n          this.loginError = '';\n          const {\n            username,\n            password,\n            remember\n          } = values;\n\n          // 记住用户名和密码\n          if (remember) {\n            JSCookie.set('username', username, {\n              expires: 7\n            });\n            JSCookie.set('password', password, {\n              expires: 7\n            });\n          } else {\n            JSCookie.remove('username');\n            JSCookie.remove('password');\n          }\n\n          // 调用登录操作\n          this.login({\n            username,\n            password\n          }).then(() => {\n            this.$message.success('登录成功');\n            this.$router.push({\n              path: '/'\n            });\n          }).catch(error => {\n            this.loginError = error.message || '登录失败，请检查用户名和密码';\n          }).finally(() => {\n            this.loading = false;\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapActions","JSCookie","name","data","loading","loginError","username","password","rememberMe","beforeCreate","form","$form","createForm","created","get","methods","handleSubmit","e","preventDefault","validateFields","err","values","remember","set","expires","remove","login","then","$message","success","$router","push","path","catch","error","message","finally"],"sources":["src/views/login/index.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-form-container\">\n      <div class=\"login-header\">\n        <img src=\"@/assets/logo.png\" alt=\"logo\" class=\"login-logo\" />\n        <h1 class=\"login-title\">洗衣店管理系统</h1>\n      </div>\n      \n      <a-form\n        id=\"login-form\"\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        class=\"login-form\"\n      >\n        <a-alert\n          v-if=\"loginError\"\n          type=\"error\"\n          :message=\"loginError\"\n          show-icon\n          style=\"margin-bottom: 24px\"\n        />\n        \n        <a-form-item>\n          <a-input\n            v-decorator=\"[\n              'username',\n              {\n                rules: [{ required: true, message: '请输入用户名' }],\n                initialValue: rememberMe ? username : ''\n              }\n            ]\"\n            size=\"large\"\n            placeholder=\"用户名\"\n          >\n            <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0, 0, 0, 0.25)\" />\n          </a-input>\n        </a-form-item>\n        \n        <a-form-item>\n          <a-input-password\n            v-decorator=\"[\n              'password',\n              {\n                rules: [{ required: true, message: '请输入密码' }],\n                initialValue: rememberMe ? password : ''\n              }\n            ]\"\n            size=\"large\"\n            placeholder=\"密码\"\n          >\n            <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0, 0, 0, 0.25)\" />\n          </a-input-password>\n        </a-form-item>\n        \n        <a-form-item>\n          <div class=\"login-form-options\">\n            <a-checkbox\n              v-decorator=\"[\n                'remember',\n                {\n                  valuePropName: 'checked',\n                  initialValue: rememberMe\n                }\n              ]\"\n            >\n              记住我\n            </a-checkbox>\n            <a href=\"javascript:;\" class=\"login-form-forgot\">忘记密码</a>\n          </div>\n          \n          <a-button\n            type=\"primary\"\n            html-type=\"submit\"\n            size=\"large\"\n            class=\"login-form-button\"\n            :loading=\"loading\"\n          >\n            登录\n          </a-button>\n        </a-form-item>\n      </a-form>\n      \n      <div class=\"login-footer\">\n        <p>洗衣店管理系统 &copy; 2023 Created by BigCat</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport JSCookie from 'js-cookie';\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loading: false,\n      loginError: '',\n      username: '',\n      password: '',\n      rememberMe: false\n    };\n  },\n  beforeCreate() {\n    this.form = this.$form.createForm(this);\n  },\n  created() {\n    // 检查是否有保存的用户名密码\n    this.username = JSCookie.get('username') || '';\n    this.password = JSCookie.get('password') || '';\n    this.rememberMe = this.username !== '' && this.password !== '';\n  },\n  methods: {\n    ...mapActions('user', ['login']),\n    \n    handleSubmit(e) {\n      e.preventDefault();\n      \n      this.form.validateFields((err, values) => {\n        if (!err) {\n          this.loading = true;\n          this.loginError = '';\n          \n          const { username, password, remember } = values;\n          \n          // 记住用户名和密码\n          if (remember) {\n            JSCookie.set('username', username, { expires: 7 });\n            JSCookie.set('password', password, { expires: 7 });\n          } else {\n            JSCookie.remove('username');\n            JSCookie.remove('password');\n          }\n          \n          // 调用登录操作\n          this.login({ username, password })\n            .then(() => {\n              this.$message.success('登录成功');\n              this.$router.push({ path: '/' });\n            })\n            .catch(error => {\n              this.loginError = error.message || '登录失败，请检查用户名和密码';\n            })\n            .finally(() => {\n              this.loading = false;\n            });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login-container {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #f0f2f5;\n  background-image: url('~@/assets/login-bg.svg');\n  background-repeat: no-repeat;\n  background-position: center 110px;\n  background-size: 100%;\n}\n\n.login-form-container {\n  width: 380px;\n  padding: 40px;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.login-logo {\n  width: 80px;\n  height: 80px;\n}\n\n.login-title {\n  font-size: 28px;\n  color: rgba(0, 0, 0, 0.85);\n  font-weight: 600;\n  margin-top: 16px;\n}\n\n.login-form-options {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 24px;\n}\n\n.login-form-button {\n  width: 100%;\n  height: 40px;\n}\n\n.login-form-forgot {\n  float: right;\n}\n\n.login-footer {\n  text-align: center;\n  margin-top: 40px;\n  color: rgba(0, 0, 0, 0.45);\n}\n</style> "],"mappings":"AA0FA,SAAAA,UAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,UAAA;MACAC,QAAA;MACAC,QAAA;MACAC,UAAA;IACA;EACA;EACAC,aAAA;IACA,KAAAC,IAAA,QAAAC,KAAA,CAAAC,UAAA;EACA;EACAC,QAAA;IACA;IACA,KAAAP,QAAA,GAAAL,QAAA,CAAAa,GAAA;IACA,KAAAP,QAAA,GAAAN,QAAA,CAAAa,GAAA;IACA,KAAAN,UAAA,QAAAF,QAAA,gBAAAC,QAAA;EACA;EACAQ,OAAA;IACA,GAAAf,UAAA;IAEAgB,aAAAC,CAAA;MACAA,CAAA,CAAAC,cAAA;MAEA,KAAAR,IAAA,CAAAS,cAAA,EAAAC,GAAA,EAAAC,MAAA;QACA,KAAAD,GAAA;UACA,KAAAhB,OAAA;UACA,KAAAC,UAAA;UAEA;YAAAC,QAAA;YAAAC,QAAA;YAAAe;UAAA,IAAAD,MAAA;;UAEA;UACA,IAAAC,QAAA;YACArB,QAAA,CAAAsB,GAAA,aAAAjB,QAAA;cAAAkB,OAAA;YAAA;YACAvB,QAAA,CAAAsB,GAAA,aAAAhB,QAAA;cAAAiB,OAAA;YAAA;UACA;YACAvB,QAAA,CAAAwB,MAAA;YACAxB,QAAA,CAAAwB,MAAA;UACA;;UAEA;UACA,KAAAC,KAAA;YAAApB,QAAA;YAAAC;UAAA,GACAoB,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;cAAAC,IAAA;YAAA;UACA,GACAC,KAAA,CAAAC,KAAA;YACA,KAAA7B,UAAA,GAAA6B,KAAA,CAAAC,OAAA;UACA,GACAC,OAAA;YACA,KAAAhC,OAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}